# Hammer-Systems-tests

## Referral System API

–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞ Django + DRF.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ó–∞–ø—Ä–æ—Å –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ 4-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
* –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á—É–∂–æ–≥–æ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)
* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ç–µ–∫—É—â–∏–º –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–æ–º –∏ —Å–ø–∏—Å–∫–æ–º —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python 3.8+
* PostgreSQL
* pip

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:

   ```bash
   git clone https://github.com/Nekspert/Hammer-Systems-tests.git
   cd referral_system
   ```

2. –°–æ–∑–¥–∞–µ–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

   ```bash
   python -m venv .venv
   source .venv/bin/activate   # Linux/macOS
   .\.venv\Scripts\activate     # Windows
   ```

3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

4. –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

   ```dotenv
   DB_NAME=<–∏–º—è_–±–¥>
   DB_USER=<–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>
   DB_PASSWORD=<–ø–∞—Ä–æ–ª—å>
   DB_HOST=<—Ö–æ—Å—Ç>
   DB_PORT=<–ø–æ—Ä—Ç>
   ```

5. –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–µ–º —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

   ```bash
   python manage.py makemigrations
   python manage.py migrate
   python manage.py createsuperuser
   ```

6. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä:

   ```bash
   python manage.py runserver
   ```

–¢–µ–ø–µ—Ä—å API –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000/api/`.

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω DRF. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:

1. –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞: `POST /api/auth/request_code/` —Å JSON `{ "phone_number": "+71234567890" }`.
2. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞: `POST /api/auth/verify_code/` —Å `{ "phone_number": "+71234567890", "code": "1234" }`.

–í –æ—Ç–≤–µ—Ç–µ –ø—Ä–∏–¥–µ—Ç —Ç–æ–∫–µ–Ω:

```json
{
  "token": "<–≤–∞—à_—Ç–æ–∫–µ–Ω>"
}
```

–î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:

```
Authorization: Token <–≤–∞—à_—Ç–æ–∫–µ–Ω>
```

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω–∏–µ API:

| –ú–µ—Ç–æ–¥ | URL                        | –ü–æ—è—Å–Ω–µ–Ω–∏–µ                                                        |
|-------|----------------------------|------------------------------------------------------------------|
| POST  | `/api/auth/request_code/`  | –ó–∞–ø—Ä–æ—Å SMS-–∫–æ–¥–∞ –ø–æ `phone_number`                                |
| POST  | `/api/auth/verify_code/`   | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞, —Å–æ–∑–¥–∞–Ω–∏–µ/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–æ–∑–≤—Ä–∞—Ç —Ç–æ–∫–µ–Ω–∞ |
| GET   | `/api/profile/`            | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)                            |
| POST  | `/api/profile/use_invite/` | –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á—É–∂–æ–≥–æ `invite_code` (—Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)               |

## üìã Postman Collection

–í –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ª–µ–∂–∏—Ç `postman_collection.json` —Å –≥–æ—Ç–æ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏:

* Request Code
* Verify Code
* Get Profile
* Use Invite